<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link type="text/css" rel="stylesheet" href="../../../css/style.css">
    <link type="text/css" rel="stylesheet" href="../../../css/layouts.css">
    <script type="text/javascript" defer src="../../../js/layouts.js"></script>
    <script type="text/javascript" defer src="../../../js/animalCount.js"></script>
</head>
<body class="bg-primary-50">
   
    <!-- Navigation bar -->
    <nav class="relative">
        <%- include('../components/navBar') %>
        <header class="w-full h-[70vh] relative top-0 overflow-hidden header-habitat">
        </header>
    </nav>
 
    <!-- Habitat presentation section -->
    <main class="w-full h-fit pb-9 space-y-4 mt-10">
        
        <!-- Introduction section for the habitat -->
        <div class="flex flex-col space-y-20 gap-y-10">
            <div class="flex items-center justify-center flex-col space-y-4">
                <h1 class="font-neucha text-3xl text-center "><%= habitat.name %></h1>
                <p class="font-muli text-center max-w-[70%] ">
                    <%= habitat.description %>
                </p>
            </div>
        </div>

        <!-- Animals cards section -->
        <div class="container flex flex-col justify-center h-full mx-auto pt-5">
            <!-- Cards container -->
            <div class="h-full w-full space-y-8 md:space-y-0 md:pt-2 md:px-14 md:flex md:flex-row">

                <div class="container mx-auto">
                    <div class="flex flex-wrap justify-center gap-5">

                        <% if (animals.length > 0) { %>
                            <% animals.forEach(animal => { %>
                              <!-- Card for each animal -->
                        <div class="flex flex-col relative items-center border rounded-md shadow-md w-[50vw] h-[50vh] md:w-[18vw] mx-auto gap-y-5 pb-3">
                            <div class="w-full h-3/5">
                                <img src="/<%= animal.images %>" alt="Photo <%= animal.race %>" class="rounded-t-md w-full h-full object-cover">
                            </div>
                            <div>
                                <h1 class="font-muli text-xl text-center "><%= animal.name %></h1>
                            </div>
                            <div class="flex items-center justify-center w-full h-1/5">
                                <button class="dropDown-id-card flex items-center justify-center space-x-3 bg-secondary-100 w-36 h-9 md:w-32 rounded-sm text-white hover:text-black hover:bg-secondary-50 hover:scale-95 duration-150 ease-in" data-animal-name="<%= animal.name %>">
                                    <p class="font-muli text-sm">Découvrir</p>
                                </button>
                            </div>

                            <!-- Additional info dropdown for animal -->
                            <div class="absolute w-56 h-96 bottom-0 bg-black/80 rounded-md p-2 flex flex-col items-center justify-center space-y-3 card-id hidden">
                                <button class="absolute top-2 right-2 closeDropDown-card-id">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">
                                        <path fill="white" d="M3.64 2.27L7.5 6.13l3.84-3.84A.92.92 0 0 1 12 2a1 1 0 0 1 1 1a.9.9 0 0 1-.27.66L8.84 7.5l3.89 3.89A.9.9 0 0 1 13 12a1 1 0 0 1-1 1a.92.92 0 0 1-.69-.27L7.5 8.87l-3.85 3.85A.92.92 0 0 1 3 13a1 1 0 0 1-1-1a.9.9 0 0 1 .27-.66L6.16 7.5L2.27 3.61A.9.9 0 0 1 2 3a1 1 0 0 1 1-1c.24.003.47.1.64.27"/>
                                    </svg>
                                </button>
                                <div class="flex space-x-1">
                                    <h1 class="font-muli text-white font-bold text-lg">Prénom :</h1>
                                    <h1 class="font-muli text-white text-lg text-nowrap"><%= animal.name %></h1>
                                </div>
                                <div class="flex space-x-1">
                                    <h1 class="font-muli text-white font-bold text-lg">Race :</h1>
                                    <h1 class="font-muli text-white text-lg text-nowrap"><%= animal.race %></h1>
                                </div>
                                <div class="flex flex-col space-y-2">
                                    <h1 class="font-muli text-white font-bold text-lg">Note du vétérinaire :</h1>
                                    <h1 class="font-muli text-white text-center text-sm">
                                        <%= animal.report ? animal.report.content : 'Aucun rapport disponible.' %>
                                    </h1>
                                </div>
                            </div>
                        </div>
                            <% }) %>
                        <% } %>
                        
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <%- include('../components/footer') %>
    </footer>
</body>
</html>
